#include <iostream>
#include <locale>
#include <codecvt>
#include "modAlphaCipher.h"

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ª–æ–∫–∞–ª–∏
void setRussianLocale() {
    try {
        std::locale::global(std::locale("ru_RU.UTF-8"));
        std::wcout.imbue(std::locale());
        std::wcin.imbue(std::locale());
        std::wcerr.imbue(std::locale());
    } catch (const std::exception& e) {
        std::wcout << L"–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å ru_RU.UTF-8. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é." << std::endl;
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ–Ω—é
void showMenu() {
    std::wcout << L"\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê" << std::endl;
    std::wcout << L"     –®–ò–§–† –ì–†–û–ù–°–§–ï–õ–¨–î–ê (–° –ü–†–û–ë–ï–õ–ê–ú–ò) - –ú–ï–ù–Æ" << std::endl;
    std::wcout << L"‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê" << std::endl;
    std::wcout << L"1 - –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç" << std::endl;
    std::wcout << L"2 - –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç" << std::endl;
    std::wcout << L"3 - –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–±–µ–ª–∞–º–∏" << std::endl;
    std::wcout << L"4 - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —à–∏—Ñ—Ä–µ" << std::endl;
  //std::wcout << L"5 - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π" << std::endl;
    std::wcout << L"0 - –í—ã—Ö–æ–¥" << std::endl;
    std::wcout << L"‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê" << std::endl;
    std::wcout << L"–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: ";
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
void encryptText() {
    std::wstring key, text;
    
    std::wcout << L"\n‚îÄ‚îÄ –ó–ê–®–ò–§–†–û–í–ê–ù–ò–ï –¢–ï–ö–°–¢–ê ‚îÄ‚îÄ" << std::endl;
    std::wcout << L"–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á (—Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã –∏ –ø—Ä–æ–±–µ–ª—ã): ";
    std::wcin.ignore();
    std::getline(std::wcin, key);
    
    try {
        modAlphaCipher cipher(key);
        
        std::wcout << L"–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è: ";
        std::getline(std::wcin, text);
        
        std::wstring encrypted = cipher.encrypt(text);
        
        std::wcout << L"\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê" << std::endl;
        std::wcout << L"–†–ï–ó–£–õ–¨–¢–ê–¢ –®–ò–§–†–û–í–ê–ù–ò–Ø:" << std::endl;
        std::wcout << L"–ö–ª—é—á: '" << key << L"'" << std::endl;
        std::wcout << L"–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç: '" << text << L"'" << std::endl;
        std::wcout << L"–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: '" << encrypted << L"'" << std::endl;
        std::wcout << L"‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê" << std::endl;
        
    } catch (const cipher_error& e) {
        std::wcout << L"‚ùå –û–®–ò–ë–ö–ê: " << e.what() << std::endl;
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
void decryptText() {
    std::wstring key, text;
    
    std::wcout << L"\n‚îÄ‚îÄ –†–ê–°–®–ò–§–†–û–í–ê–ù–ò–ï –¢–ï–ö–°–¢–ê ‚îÄ‚îÄ" << std::endl;
    std::wcout << L"–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á (—Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã –∏ –ø—Ä–æ–±–µ–ª—ã): ";
    std::wcin.ignore();
    std::getline(std::wcin, key);
    
    try {
        modAlphaCipher cipher(key);
        
        std::wcout << L"–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è: ";
        std::getline(std::wcin, text);
        
        std::wstring decrypted = cipher.decrypt(text);
        
        std::wcout << L"\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê" << std::endl;
        std::wcout << L"–†–ï–ó–£–õ–¨–¢–ê–¢ –†–ê–°–®–ò–§–†–û–í–ê–ù–ò–Ø:" << std::endl;
        std::wcout << L"–ö–ª—é—á: '" << key << L"'" << std::endl;
        std::wcout << L"–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: '" << text << L"'" << std::endl;
        std::wcout << L"–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: '" << decrypted << L"'" << std::endl;
        std::wcout << L"‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê" << std::endl;
        
    } catch (const cipher_error& e) {
        std::wcout << L"‚ùå –û–®–ò–ë–ö–ê: " << e.what() << std::endl;
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ—Ä–æ–≤ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
void showExamples() {
    std::wcout << L"\n‚îÄ‚îÄ –ü–†–ò–ú–ï–†–´ –†–ê–ë–û–¢–´ –° –ü–†–û–ë–ï–õ–ê–ú–ò ‚îÄ‚îÄ" << std::endl;
    
    // –ü—Ä–∏–º–µ—Ä 1 - –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
    try {
        modAlphaCipher cipher1(L"–°–ï–ö–†–ï–¢–ù–´–ô –ö–õ–Æ–ß");
        std::wstring encrypted1 = cipher1.encrypt(L"–ü–†–ò–í–ï–¢ –ú–ò–†");
        std::wstring decrypted1 = cipher1.decrypt(encrypted1);
        
        std::wcout << L"\n–ü—Ä–∏–º–µ—Ä 1 - –ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–æ–±–µ–ª—ã:" << std::endl;
        std::wcout << L"–ö–ª—é—á: '–°–ï–ö–†–ï–¢–ù–´–ô –ö–õ–Æ–ß'" << std::endl;
        std::wcout << L"–¢–µ–∫—Å—Ç: '–ü–†–ò–í–ï–¢ –ú–ò–†'" << std::endl;
        std::wcout << L"–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ: '" << encrypted1 << L"'" << std::endl;
        std::wcout << L"–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ: '" << decrypted1 << L"'" << std::endl;
        std::wcout << L"‚úì –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å: " << (L"–ü–†–ò–í–ï–¢ –ú–ò–†" == decrypted1 ? L"–î–ê" : L"–ù–ï–¢") << std::endl;
    } catch (const cipher_error& e) {
        std::wcout << L"–û—à–∏–±–∫–∞ –≤ –ø—Ä–∏–º–µ—Ä–µ 1: " << e.what() << std::endl;
    }
    
    // –ü—Ä–∏–º–µ—Ä 2 - –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª–æ–≤
    try {
        modAlphaCipher cipher2(L"–ú–û–ô –ö–õ–Æ–ß");
        std::wstring encrypted2 = cipher2.encrypt(L"–ü–†–û–ì–†–ê–ú–ú–ò–†–û–í–ê–ù–ò–ï –ù–ê C++");
        std::wstring decrypted2 = cipher2.decrypt(encrypted2);
        
        std::wcout << L"\n–ü—Ä–∏–º–µ—Ä 2 - –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª–æ–≤:" << std::endl;
        std::wcout << L"–ö–ª—é—á: '–ú–û–ô –ö–õ–Æ–ß'" << std::endl;
        std::wcout << L"–¢–µ–∫—Å—Ç: '–ü–†–û–ì–†–ê–ú–ú–ò–†–û–í–ê–ù–ò–ï –ù–ê C++'" << std::endl;
        std::wcout << L"–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ: '" << encrypted2 << L"'" << std::endl;
        std::wcout << L"–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ: '" << decrypted2 << L"'" << std::endl;
        std::wcout << L"‚úì –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å: " << (L"–ü–†–û–ì–†–ê–ú–ú–ò–†–û–í–ê–ù–ò–ï –ù–ê " == decrypted2 ? L"–î–ê" : L"–ù–ï–¢") << std::endl;
        std::wcout << L"–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –°–∏–º–≤–æ–ª—ã 'C++' –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è" << std::endl;
    } catch (const cipher_error& e) {
        std::wcout << L"–û—à–∏–±–∫–∞ –≤ –ø—Ä–∏–º–µ—Ä–µ 2: " << e.what() << std::endl;
    }
    
    // –ü—Ä–∏–º–µ—Ä 3 - –∫–ª—é—á —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
    try {
        modAlphaCipher cipher3(L"–°–ï–ö–†–ï–¢–ù–´–ô –ü–ê–†–û–õ–¨");
        std::wstring encrypted3 = cipher3.encrypt(L"–≠–¢–û –¢–ï–°–¢–û–í–û–ï –°–û–û–ë–©–ï–ù–ò–ï");
        std::wstring decrypted3 = cipher3.decrypt(encrypted3);
        
        std::wcout << L"\n–ü—Ä–∏–º–µ—Ä 3 - –ö–ª—é—á —Å –ø—Ä–æ–±–µ–ª–∞–º–∏:" << std::endl;
        std::wcout << L"–ö–ª—é—á: '–°–ï–ö–†–ï–¢–ù–´–ô –ü–ê–†–û–õ–¨'" << std::endl;
        std::wcout << L"–¢–µ–∫—Å—Ç: '–≠–¢–û –¢–ï–°–¢–û–í–û–ï –°–û–û–ë–©–ï–ù–ò–ï'" << std::endl;
        std::wcout << L"–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ: '" << encrypted3 << L"'" << std::endl;
        std::wcout << L"–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ: '" << decrypted3 << L"'" << std::endl;
        std::wcout << L"‚úì –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å: " << (L"–≠–¢–û –¢–ï–°–¢–û–í–û–ï –°–û–û–ë–©–ï–ù–ò–ï" == decrypted3 ? L"–î–ê" : L"–ù–ï–¢") << std::endl;
    } catch (const cipher_error& e) {
        std::wcout << L"–û—à–∏–±–∫–∞ –≤ –ø—Ä–∏–º–µ—Ä–µ 3: " << e.what() << std::endl;
    }
    
    // –ü—Ä–∏–º–µ—Ä 4 - —Ä–∞–∑–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã –∏ –ø—Ä–æ–±–µ–ª—ã
    try {
        modAlphaCipher cipher4(L"—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á");
        std::wstring encrypted4 = cipher4.encrypt(L"–ü—Ä–∏–≤–µ—Ç –º–∏—Ä –∫–∞–∫ –¥–µ–ª–∞");
        std::wstring decrypted4 = cipher4.decrypt(encrypted4);
        
        std::wcout << L"\n–ü—Ä–∏–º–µ—Ä 4 - –†–∞–∑–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã:" << std::endl;
        std::wcout << L"–ö–ª—é—á: '—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á'" << std::endl;
        std::wcout << L"–¢–µ–∫—Å—Ç: '–ü—Ä–∏–≤–µ—Ç –º–∏—Ä –∫–∞–∫ –¥–µ–ª–∞'" << std::endl;
        std::wcout << L"–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ: '" << encrypted4 << L"'" << std::endl;
        std::wcout << L"–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ: '" << decrypted4 << L"'" << std::endl;
        std::wcout << L"‚úì –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å: " << (L"–ü–†–ò–í–ï–¢ –ú–ò–† –ö–ê–ö –î–ï–õ–ê" == decrypted4 ? L"–î–ê" : L"–ù–ï–¢") << std::endl;
    } catch (const cipher_error& e) {
        std::wcout << L"–û—à–∏–±–∫–∞ –≤ –ø—Ä–∏–º–µ—Ä–µ 4: " << e.what() << std::endl;
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —à–∏—Ñ—Ä–µ
void showInfo() {
    std::wcout << L"\n‚îÄ‚îÄ –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –®–ò–§–†–ï –ì–†–û–ù–°–§–ï–õ–¨–î–ê ‚îÄ‚îÄ" << std::endl;
    std::wcout << L"–®–∏—Ñ—Ä –ì—Ä–æ–Ω—Å—Ñ–µ–ª—å–¥–∞ - —ç—Ç–æ –ø–æ–ª–∏–∞–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π —à–∏—Ñ—Ä –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏," << std::endl;
    std::wcout << L"—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —à–∏—Ñ—Ä–∞ –í–∏–∂–µ–Ω–µ—Ä–∞." << std::endl;
    std::wcout << L"\n–û–°–û–ë–ï–ù–ù–û–°–¢–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò:" << std::endl;
    std::wcout << L"‚úì –†–∞–±–æ—Ç–∞–µ—Ç —Å —Ä—É—Å—Å–∫–∏–º –∞–ª—Ñ–∞–≤–∏—Ç–æ–º (33 –±—É–∫–≤—ã –≤–∫–ª—é—á–∞—è –Å)" << std::endl;
    std::wcout << L"‚úì –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ü–†–û–ë–ï–õ–´ –≤ —Ç–µ–∫—Å—Ç–µ –∏ –∫–ª—é—á–µ" << std::endl;
    std::wcout << L"‚úì –†–µ–≥–∏—Å—Ç—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –∫ –≤–µ—Ä—Ö–Ω–µ–º—É" << std::endl;
    std::wcout << L"‚úì –ù–µ-–±—É–∫–≤–µ–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (–∫—Ä–æ–º–µ –ø—Ä–æ–±–µ–ª–æ–≤) –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è" << std::endl;
    std::wcout << L"‚úì –ü—Ä–æ–±–µ–ª—ã –Ω–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è, –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ —Å–≤–æ–∏—Ö –º–µ—Å—Ç–∞—Ö" << std::endl;
    std::wcout << L"‚úì –ö–ª—é—á –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã –∏ –ø—Ä–æ–±–µ–ª—ã" << std::endl;
    std::wcout << L"\n–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–±–µ–ª–∞–º–∏:" << std::endl;
    std::wcout << L"‚Ä¢ –ü—Ä–æ–±–µ–ª –∏–º–µ–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å 33 –≤ –∞–ª—Ñ–∞–≤–∏—Ç–µ" << std::endl;
    std::wcout << L"‚Ä¢ –ü—Ä–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–±–µ–ª –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–±–µ–ª–æ–º" << std::endl;
    std::wcout << L"‚Ä¢ –ü—Ä–∏ –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–±–µ–ª —Ç–∞–∫–∂–µ –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–±–µ–ª–æ–º" << std::endl;
    std::wcout << L"‚Ä¢ –ü—Ä–æ–±–µ–ª—ã –≤ –∫–ª—é—á–µ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —á–∏—Å–ª–æ–≤–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞" << std::endl;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π
void testExceptions() {
    std::wcout << L"\n‚îÄ‚îÄ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ò–°–ö–õ–Æ–ß–ï–ù–ò–ô ‚îÄ‚îÄ" << std::endl;
    
    std::wcout << L"\n1. –¢–µ—Å—Ç –ø—É—Å—Ç–æ–≥–æ –∫–ª—é—á–∞:" << std::endl;
    try {
        modAlphaCipher cipher1(L"");
    } catch (const cipher_error& e) {
        std::wcout << L"‚úì –ü–æ–π–º–∞–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: " << e.what() << std::endl;
    }
    
    std::wcout << L"\n2. –¢–µ—Å—Ç –∫–ª—é—á–∞ —Å –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏:" << std::endl;
    try {
        modAlphaCipher cipher2(L"–ö–õ–Æ–ß123");
    } catch (const cipher_error& e) {
        std::wcout << L"‚úì –ü–æ–π–º–∞–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: " << e.what() << std::endl;
    }
    
    std::wcout << L"\n3. –¢–µ—Å—Ç –ø—É—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è:" << std::endl;
    try {
        modAlphaCipher cipher3(L"–ö–õ–Æ–ß");
        cipher3.encrypt(L"");
    } catch (const cipher_error& e) {
        std::wcout << L"‚úì –ü–æ–π–º–∞–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: " << e.what() << std::endl;
    }
    
    std::wcout << L"\n4. –¢–µ—Å—Ç —Ç–µ–∫—Å—Ç–∞ —Ç–æ–ª—å–∫–æ —Å –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏:" << std::endl;
    try {
        modAlphaCipher cipher4(L"–ö–õ–Æ–ß");
        cipher4.encrypt(L"123!@#");
    } catch (const cipher_error& e) {
        std::wcout << L"‚úì –ü–æ–π–º–∞–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: " << e.what() << std::endl;
    }
    
    std::wcout << L"\n5. –¢–µ—Å—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ:" << std::endl;
    try {
        modAlphaCipher cipher5(L"–ö–õ–Æ–ß");
        std::wstring encrypted = cipher5.encrypt(L"–¢–ï–°–¢");
        // "–ü–æ—Ä—Ç–∏–º" –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
        if (!encrypted.empty()) {
            encrypted[0] = L'—Ç'; // –º–µ–Ω—è–µ–º –Ω–∞ —Å—Ç—Ä–æ—á–Ω—É—é
        }
        cipher5.decrypt(encrypted);
    } catch (const cipher_error& e) {
        std::wcout << L"‚úì –ü–æ–π–º–∞–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: " << e.what() << std::endl;
    }
}

int main() {
    setRussianLocale();
    
    std::wcout << L"‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà" << std::endl;
    std::wcout << L"‚ñà                                            ‚ñà" << std::endl;
    std::wcout << L"‚ñà        –®–ò–§–†–û–í–ê–õ–¨–©–ò–ö –ì–†–û–ù–°–§–ï–õ–¨–î–ê           ‚ñà" << std::endl;
    std::wcout << L"‚ñà      —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ü–†–û–ë–ï–õ–û–í                ‚ñà" << std::endl;
    std::wcout << L"‚ñà         –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞                ‚ñà" << std::endl;
    std::wcout << L"‚ñà                                            ‚ñà" << std::endl;
    std::wcout << L"‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà" << std::endl;
    
    int choice;
    do {
        showMenu();
        std::wcin >> choice;
        
        switch (choice) {
            case 1:
                encryptText();
                break;
            case 2:
                decryptText();
                break;
            case 3:
                showExamples();
                break;
            case 4:
                showInfo();
                break;
            case 5:
                testExceptions();
                break;
            case 0:
                std::wcout << L"\n–î–æ —Å–≤–∏–¥–∞–Ω–∏—è! üëã" << std::endl;
                break;
            default:
                std::wcout << L"‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞." << std::endl;
        }
        
        if (choice != 0) {
            std::wcout << L"\n–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...";
            std::wcin.ignore();
            std::wcin.get();
        }
        
    } while (choice != 0);
    
    return 0;
}
